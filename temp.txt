## üîë API Endpoints

### üè• Health & Status
- `GET /health` - Check API health status

---

### üë• **ACCOUNTS** - `/api/v1/accounts`

#### Registration & Login
- `POST /api/v1/accounts/register` - Register a new account
  ```json
  {
    "email": "user@example.com",
    "password": "SecurePass123",
    "full_name": "Jan Kowalski",
    "phone": "123456789",
    "city": "Warsaw",
    "availability": [
      {
        "day_of_week": 1,
        "start_time": "08:00",
        "end_time": "16:00",
        "is_active": true
      }
    ]
  }
  ```

- `POST /api/v1/accounts/login` - Login
  ```json
  {
    "email": "user@example.com",
    "password": "SecurePass123"
  }
  ```

#### Account Management
- `GET /api/v1/accounts/me` - Get your account (requires auth)
- `GET /api/v1/accounts/{email}` - REMOVED
- `GET /api/v1/accounts/volunteers/active` - Public list of active volunteers
- `PUT /api/v1/accounts/me` - Update your account (requires auth)
- `DELETE /api/v1/accounts/me` - Delete your account (requires auth)
Account responses returned by authenticated endpoints now expose a `genpoints` counter so volunteers can track earned credit (+10 per completed report).

---

### üìã **REPORTS** - `/api/v1/reports`

> **All report endpoints require** `Authorization: Bearer <token>` obtained from
> `/api/v1/accounts/login`.
> Note: Reports are submitted publicly (no token required) and `reporter_email` will be empty for anonymous reports.

#### Create and Manage
- `POST /api/v1/reports/` - Create a new report
  ```json
  {
    "full_name": "Anna Nowak",
    "phone": "987654321",
    "age": 45,
    "address": "ul. Przyk≈Çadowa 10",
    "city": "Krakow",
    "problem": "No wheelchair ramp at the government office entrance",
    "contact_ok": true,
    "report_type_id": 1,
    "report_details": "Dodatkowe informacje..."
  }
  ```
  Response bodies now include a boolean `is_reviewed` flag so operators immediately know whether the report has already been triaged. Newly created reports default to `false`.

#### Browse Reports
- `GET /api/v1/reports/` - Get all available reports (excludes accepted and completed reports)
  - Query params: `skip`, `limit`, `report_type_id`, `city`, `search`, `date_from`, `date_to`
  - Example: `/api/v1/reports/?city=Warsaw&limit=50`
  - Note: This endpoint shows only reports that are neither currently assigned nor already completed

- `GET /api/v1/reports/{id}` - Get a report by ID
-- `GET /api/v1/reports/stats` - Statistics for pending, unassigned reports (not completed and not accepted by any volunteer)
- `GET /api/v1/reports/metrics/avg-response-time` - Public average response time (minutes) between report submission and first acceptance
- `GET /api/v1/reports/my-accepted-report` - Authenticated helper returning the ID of the report currently assigned to you (or `null` if none)
- `GET /api/v1/reports/my-completed-reports` - Get full report data for all reports completed by you (requires auth, supports `skip`/`limit` pagination)
- `GET /api/v1/reports/reporter/{email}` - REMOVED

#### Edit & Delete
- `POST /api/v1/reports/{id}/accept` ‚Äì Accept a report (requires auth). Only one volunteer can own a report at a time; the endpoint returns HTTP `409` if somebody else already works on it, or `400` if you already have another active report.
- `POST /api/v1/reports/active/cancel` ‚Äì Release your currently assigned report so another volunteer may take it.
- `POST /api/v1/reports/active/complete` ‚Äì Mark the active report as completed. This clears `active_report`, increments the `resolved_cases` counters, and awards **+10 genpoints** (displayed on `/api/v1/accounts/me`).

---

### üè∑Ô∏è **TYPES** - `/api/v1/types`

- `GET /api/v1/types/report_types` - Get all predefined report categories

---

### üîê **Authentication (Legacy)** - `/api/v1/auth`
- `POST /api/v1/auth/register` - Registration (legacy system)
- `POST /api/v1/auth/login` - Login (legacy system)

### üë§ **Users (Legacy)** - `/api/v1/users`
- `GET /api/v1/users/me` - Get profile (legacy system)
- `GET /api/v1/users/{user_id}` - Get user by ID
